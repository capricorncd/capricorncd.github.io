import{r as h,j as e,u as C,N as G,a as w,b as c,B as u,v as V,_ as F,e as K,Z as P,W as I,c as B,D as x,S as b,I as v,d as N,A as j,P as J,L as T,G as U,H as q,O as Y,U as z,F as Z,R as $,f as k,g as Q,h as X}from"./vendor.021bed17.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const A={isAuthenticated:!1,signIn(t){A.isAuthenticated=!0,setTimeout(t,100)},signOut(t){A.isAuthenticated=!1,setTimeout(t,100)}},M=h.exports.createContext({});function ee({children:t}){const[n,o]=h.exports.useState(null),a={user:n,signIn:(l,p)=>A.signIn(()=>{o(l),p()}),signOut:l=>A.signOut(()=>{o(null),l()})};return e(M.Provider,{value:a,children:t})}function O(){return h.exports.useContext(M)}function te(){const t=O(),n=w();return t.user?c("p",{children:["Welcome ",t.user,"!"," ",e(u,{onClick:()=>{t.signOut(()=>n("/"))},children:"Sign out"})]}):e("p",{children:"You are not logged in."})}function ne({children:t}){const n=O(),o=C();return n.user?t:e(G,{to:"/login",state:{from:o},replace:!0})}function S(t){const{style:n}=V(t,{mh:o=>K("minHeight",o)});return e("div",{className:F(t.className),style:n,children:t.children})}const L="_chains",D="_transactions",R="acb",H={hash:R,transactions:[]},W=h.exports.createContext({});function re(t){const[n,o]=h.exports.useState(P(D,[])),[s,r]=h.exports.useState(P(L,[H]));h.exports.useEffect(()=>{I(D,n)},[n]),h.exports.useEffect(()=>{I(L,s)},[s]);function a(i){o([...n,{id:new Date().getTime().toString(16),name:i}])}function l(){const i=s[s.length-1],f={hash:B.exports.SHA256(i.hash+JSON.stringify(n.map(y=>y.id))).toString(),transactions:n.map(y=>y.id)};r([...s,f]),o([])}function p(){const i=[...s],d=i.shift(),f=Array.from({length:Math.ceil(Math.random()*5)}).map(()=>Math.random().toString(16).replace("0.",""));if(!i.length)i.push({hash:B.exports.SHA256(d.hash+JSON.stringify(f)).toString(),transactions:f});else{const y=Math.max(0,Math.floor(Math.random()*i.length));i[y].transactions=f}r([d,...i])}const m=h.exports.useMemo(()=>s.every((i,d)=>d===0?i.hash===R:B.exports.SHA256(s[d-1].hash+JSON.stringify(i.transactions)).toString()===i.hash),[s]);function g(){r([H])}return e(W.Provider,{value:{transactions:n,addTransaction:a,blocks:s.slice(1),writeToBlockchain:l,tamper:p,isValid:m,clearAllBlockchain:g},children:t.children})}function _(){return h.exports.useContext(W)}function ie(){const t=h.exports.useRef(null),[n,o]=h.exports.useState(""),s=_(),{addTransaction:r,writeToBlockchain:a,transactions:l,tamper:p,blocks:m,clearAllBlockchain:g}=s;return c("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e(x,{children:"Operate"}),e(b,{direction:"vertical",align:"center",style:{maxWidth:"100%",overflow:"hidden"},children:c(v.Group,{compact:!0,style:{width:"320px",maxWidth:"100%"},children:[e(v,{value:n,ref:t,style:{width:"calc(100% - 136px)"},placeholder:"Please enter transaction name",onChange:i=>o(i.currentTarget.value),onPressEnter:()=>{!n||(r(n),o(""))}}),e(u,{style:{width:"136px"},type:"primary",disabled:!n,onClick:()=>{r(n),o("")},children:"Add transaction"})]})}),e(x,{children:"Transactions that are not on the blockchain"}),e("ul",{children:l.map((i,d)=>c("li",{className:"break",children:[i.id,": ",i.name]},d))}),e(b,{children:e(u,{type:"primary",disabled:!l.length,onClick:()=>a(),children:"Write to the blockchain"})}),e(x,{children:"Transactions already on the blockchain"}),e("ul",{children:m.map((i,d)=>c("li",{className:"break",children:[i.hash,": ",i.transactions.join(", ")]},d))}),c(b,{children:[e(u,{disabled:!m.length,danger:!0,onClick:()=>p(),children:"Tamper"}),e(u,{disabled:!m.length,onClick:()=>g(),children:"Clear all blockchains"})]})]})}function E(t){return String(t).padStart(5,"0")}function ae(){const t=_();return c(b,{direction:"vertical",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[c(b,{size:"large",children:[e(N,{title:"Transactions that are not on the chain",value:E(t.transactions.length)}),e(N,{title:"Transactions that have been on the chain",value:E(t.blocks.length)})]}),e(j,{message:`Transaction is ${t.isValid?"normal":"abnormal"}`,type:t.isValid?"success":"error",showIcon:!0})]})}function ce(){return c(re,{children:[e(x,{children:e("h2",{children:"Blockchain"})}),e(ae,{}),e(ie,{}),e(x,{children:"README"}),c(S,{ta:"center",children:["A blockchain is a type of Digital Ledger Technology (DLT) that consists of growing list of records, called blocks, that are securely linked together using cryptography.",e("a",{href:"https://en.wikipedia.org/wiki/Blockchain",target:"_blank",children:"https://en.wikipedia.org/wiki/Blockchain"})]})]})}function oe(){return c("main",{children:[e("h2",{children:"Welcome to the homepage!"}),e(S,{ta:"center",children:e("img",{src:"https://source.unsplash.com/random",className:"App-logo",alt:"logo",style:{maxWidth:"100%"}})})]})}function se(){const t=w(),{pathname:n}=C();return c(S,{bg:"#f0f2f5",mh:"100vh",children:[e(J,{ghost:!1,title:"Blockchain",subTitle:"Ant Design & React18 & Vite",extra:[e(T,{to:"/",children:e(u,{type:n==="/"?"primary":"default",children:"Home"})},"home"),e(T,{to:"/protected",children:e(u,{type:n==="/protected"?"primary":"default",children:"Protected Page"})},"protected"),e(T,{to:"/public",children:e(u,{type:n==="/public"?"primary":"default",children:"Public"})},"public"),e(u,{shape:"circle",href:"https://github.com/capricorncd/blockchain",target:"_blank",children:e(U,{})},"github")],backIcon:e(q,{}),onBack:()=>t("/")}),c(S,{p:"24",children:[e(te,{}),e(Y,{})]}),c(S,{p:"24 50",ta:"center",children:["\xA92022 Created by"," ",e(u,{type:"link",href:"https://github.com/capricorncd",target:"_blank",style:{padding:0},children:"Capricorncd"}),"."]})]})}function le(){var a,l;const t=w(),n=C(),o=O(),s=((l=(a=n.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/";function r(p){p.preventDefault();const g=new FormData(p.currentTarget).get("username");o.signIn(g,()=>{t(s,{replace:!0})})}return c("div",{children:[c("p",{children:["You must log in to view the page at ",s]}),e("form",{onSubmit:r,children:c(v.Group,{compact:!0,style:{width:"300px",maxWidth:"100%"},children:[e(v,{placeholder:"Please enter any string",name:"username",prefix:e(z,{}),defaultValue:"capricorncd",style:{width:"calc(100% - 80px)"}}),e(u,{type:"primary",htmlType:"submit",style:{width:"80px"},children:"Login"})]})})]})}function he(){const[t,n]=h.exports.useState(0);return c(Z,{children:[e("h2",{children:"Protected Page"}),c(u,{onClick:()=>n(o=>o+1),children:["count is: ",t]})]})}function ue(){return e(ee,{children:e($,{children:c(k,{element:e(se,{}),children:[e(k,{path:"/",element:e(ce,{})}),e(k,{path:"/login",element:e(le,{})}),e(k,{path:"/public",element:e(oe,{})}),e(k,{path:"/protected",element:e(ne,{children:e(he,{})})})]})})})}Q(document.getElementById("root")).render(e(h.exports.StrictMode,{children:e(X,{children:e(ue,{})})}));
