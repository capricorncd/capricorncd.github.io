import{r as h,j as e,u as A,a as i,B as d,b as T,N as H,c as b,D as y,S as k,I as S,d as w,A as N,U as M,R,e as f,F as E,f as P,P as W,L as O,H as F,O as V,g as _,h as j}from"./vendor.b70633a6.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function c(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=c(r);fetch(r.href,a)}})();const v={isAuthenticated:!1,signIn(t){v.isAuthenticated=!0,setTimeout(t,100)},signOut(t){v.isAuthenticated=!1,setTimeout(t,100)}},C=h.exports.createContext(null);function G({children:t}){const[n,c]=h.exports.useState(null),a={user:n,signIn:(l,p)=>v.signIn(()=>{c(l),p()}),signOut:l=>v.signOut(()=>{c(null),l()})};return e(C.Provider,{value:a,children:t})}function B(){return h.exports.useContext(C)}function J(){const t=B(),n=A();return console.log(t),t.user?i("p",{children:["Welcome ",t.user,"!"," ",e(d,{onClick:()=>{t.signOut(()=>n("/"))},children:"Sign out"})]}):e("p",{children:"You are not logged in."})}function K({children:t}){const n=B(),c=T();return n.user?t:e(H,{to:"/login",state:{from:c},replace:!0})}const I="acb",U={hash:I,transactions:[]},L=h.exports.createContext(null);function q(t){const[n,c]=h.exports.useState([]),[s,r]=h.exports.useState([U]);function a(o){c([...n,{id:new Date().getTime().toString(16),name:o}])}function l(){const o=s[s.length-1],g={hash:b.exports.SHA256(o.hash+JSON.stringify(n.map(m=>m.id))).toString(),transactions:n.map(m=>m.id)};r([...s,g]),c([])}function p(){const o=[...s],u=o.shift(),g=Array.from({length:Math.ceil(Math.random()*5)}).map(()=>Math.random().toString(16).replace("0.",""));if(!o.length)o.push({hash:b.exports.SHA256(u.hash+JSON.stringify(g)).toString(),transactions:g});else{const m=Math.max(0,Math.floor(Math.random()*o.length));o[m].transactions=g}r([u,...o])}const x=h.exports.useMemo(()=>s.every((o,u)=>u===0?o.hash===I:b.exports.SHA256(s[u-1].hash+JSON.stringify(o.transactions)).toString()===o.hash),[s]);return e(L.Provider,{value:{transactions:n,addTransaction:a,blocks:s.slice(1),writeToBlockchain:l,tamper:p,isValid:x},children:t.children})}function D(){return h.exports.useContext(L)}function Y(){const t=h.exports.useRef(null),[n,c]=h.exports.useState(""),s=D();if(!s)return null;const{addTransaction:r,writeToBlockchain:a,transactions:l,tamper:p,blocks:x}=s;return i("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e(y,{children:"Operate"}),i(k,{direction:"vertical",align:"center",style:{maxWidth:"100%",overflow:"hidden"},children:[i(S.Group,{compact:!0,style:{width:"320px",maxWidth:"100%"},children:[e(S,{value:n,ref:t,style:{width:"calc(100% - 136px)"},placeholder:"Please enter transaction name",onChange:o=>c(o.currentTarget.value),onPressEnter:()=>{!n||(r(n),c(""))}}),e(d,{style:{width:"136px"},type:"primary",disabled:!n,onClick:()=>{r(n),c("")},children:"Add transaction"})]}),i(k,{children:[e(d,{type:"primary",disabled:!l.length,onClick:()=>a(),children:"Write to the blockchain"}),e(d,{danger:!0,onClick:()=>p(),children:"Tamper"})]})]}),e(y,{children:"Transactions that are not on the blockchain"}),e("ul",{children:l.map((o,u)=>i("li",{children:[o.id,": ",o.name]},u))}),e(y,{children:"Transactions already on the blockchain"}),e("ul",{children:x.map((o,u)=>i("li",{children:[o.hash,": ",o.transactions.join(", ")]},u))})]})}function z(){const t=D();return t?i(k,{direction:"vertical",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(k,{size:"large",children:[e(w,{title:"Transactions that are not on the chain",value:t.transactions.length}),e(w,{title:"Transactions that have been on the chain",value:t.blocks.length})]}),e(N,{message:`Transaction is ${t.isValid?"normal":"abnormal"}`,type:t.isValid?"success":"error",showIcon:!0})]}):null}function $(){return i(q,{children:[e(y,{children:e("h2",{children:"Blockchain"})}),e(z,{}),e(Y,{}),e(y,{children:"README"}),i("section",{style:{textAlign:"center"},children:["A blockchain is a type of Digital Ledger Technology (DLT) that consists of growing list of records, called blocks, that are securely linked together using cryptography.",e("a",{href:"https://en.wikipedia.org/wiki/Blockchain",target:"_blank",children:"https://en.wikipedia.org/wiki/Blockchain"})]})]})}function Q(){var a,l;const t=A(),n=T(),c=B(),s=((l=(a=n.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/";function r(p){p.preventDefault();const o=new FormData(p.currentTarget).get("username");c.signIn(o,()=>{t(s,{replace:!0})})}return i("div",{children:[i("p",{children:["You must log in to view the page at ",s]}),e("form",{onSubmit:r,children:i(S.Group,{compact:!0,style:{width:"300px",maxWidth:"100%"},children:[e(S,{placeholder:"Please enter any string",name:"username",prefix:e(M,{}),defaultValue:"capricorncd",style:{width:"calc(100% - 80px)"}}),e(d,{type:"primary",htmlType:"submit",style:{width:"80px"},children:"Login"})]})})]})}const{Content:X,Footer:Z}=P;function ee(){return e(G,{children:e(R,{children:i(f,{element:e(ne,{}),children:[e(f,{path:"/",element:e(re,{})}),e(f,{path:"/login",element:e(Q,{})}),e(f,{path:"/Blockchain",element:e($,{})}),e(f,{path:"/protected",element:e(K,{children:e(te,{})})})]})})})}function te(){const[t,n]=h.exports.useState(0);return i(E,{children:[e("h2",{children:"Protected Page"}),i(d,{onClick:()=>n(c=>c+1),children:["count is: ",t]})]})}function ne(){const t=A(),n=T();return console.log(n),i(P,{style:{minHeight:"100vh"},children:[e(W,{ghost:!1,title:"React18 Hooks Typescript Vite",subTitle:"Ant Design",extra:[e(O,{to:"/protected",children:e(d,{children:"Protected Page"})},"protected"),e(O,{to:"/blockchain",children:e(d,{type:"primary",children:"Blockchain"})},"blockchain")],backIcon:e(F,{}),onBack:()=>t("/")}),i(X,{style:{padding:"24px"},children:[e(J,{}),e(V,{})]}),i(Z,{style:{textAlign:"center"},children:["\xA92022 Created by"," ",e(d,{type:"link",href:"https://github.com/capricorncd",target:"_blank",style:{padding:0},children:"Capricorncd"}),"."]})]})}function re(){return i("main",{children:[e("h2",{children:"Welcome to the homepage!"}),e("p",{style:{textAlign:"center"},children:e("img",{src:"https://source.unsplash.com/random",className:"App-logo",alt:"logo",style:{maxWidth:"100%"}})})]})}_(document.getElementById("root")).render(e(h.exports.StrictMode,{children:e(j,{children:e(ee,{})})}));
