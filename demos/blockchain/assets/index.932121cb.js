import{r as h,j as e,u as T,N as V,a as C,b as a,B as u,v as F,_ as K,e as j,Z as P,W as I,c as w,D as x,S as b,I as v,d as N,A as J,F as M,P as U,L as B,G as q,H as Y,O as z,U as Z,R as $,f as k,g as Q,h as X}from"./vendor.021bed17.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const A={isAuthenticated:!1,signIn(t){A.isAuthenticated=!0,setTimeout(t,100)},signOut(t){A.isAuthenticated=!1,setTimeout(t,100)}},R=h.exports.createContext({});function ee({children:t}){const[n,o]=h.exports.useState(null),c={user:n,signIn:(l,p)=>A.signIn(()=>{o(l),p()}),signOut:l=>A.signOut(()=>{o(null),l()})};return e(R.Provider,{value:c,children:t})}function O(){return h.exports.useContext(R)}function te(){const t=O(),n=C();return t.user?a("p",{children:["Welcome ",t.user,"!"," ",e(u,{onClick:()=>{t.signOut(()=>n("/"))},children:"Sign out"})]}):e("p",{children:"You are not logged in."})}function ne({children:t}){const n=O(),o=T();return n.user?t:e(V,{to:"/login",state:{from:o},replace:!0})}function S(t){const{style:n}=F(t,{mh:o=>j("minHeight",o)});return e("div",{className:K(t.className),style:n,children:t.children})}const L="_chains",D="_transactions",W="acb",H={hash:W,transactions:[]},_=h.exports.createContext({});function re(t){const[n,o]=h.exports.useState(P(D,[])),[s,r]=h.exports.useState(P(L,[H]));h.exports.useEffect(()=>{I(D,n)},[n]),h.exports.useEffect(()=>{I(L,s)},[s]);function c(i){o([...n,{id:new Date().getTime().toString(16),name:i}])}function l(){const i=s[s.length-1],f={hash:w.exports.SHA256(i.hash+JSON.stringify(n.map(y=>y.id))).toString(),transactions:n.map(y=>y.id)};r([...s,f]),o([])}function p(){const i=[...s],d=i.shift(),f=Array.from({length:Math.ceil(Math.random()*5)}).map(()=>Math.random().toString(16).replace("0.",""));if(!i.length)i.push({hash:w.exports.SHA256(d.hash+JSON.stringify(f)).toString(),transactions:f});else{const y=Math.max(0,Math.floor(Math.random()*i.length));i[y].transactions=f}r([d,...i])}const m=h.exports.useMemo(()=>s.every((i,d)=>d===0?i.hash===W:w.exports.SHA256(s[d-1].hash+JSON.stringify(i.transactions)).toString()===i.hash),[s]);function g(){r([H])}return e(_.Provider,{value:{transactions:n,addTransaction:c,blocks:s.slice(1),writeToBlockchain:l,tamper:p,isValid:m,clearAllBlockchain:g},children:t.children})}function G(){return h.exports.useContext(_)}function ie(){const t=h.exports.useRef(null),[n,o]=h.exports.useState(""),s=G(),{addTransaction:r,writeToBlockchain:c,transactions:l,tamper:p,blocks:m,clearAllBlockchain:g}=s;return a("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e(x,{children:"Operate"}),e(b,{direction:"vertical",align:"center",style:{maxWidth:"100%",overflow:"hidden"},children:a(v.Group,{compact:!0,style:{width:"320px",maxWidth:"100%"},children:[e(v,{value:n,ref:t,style:{width:"calc(100% - 136px)"},placeholder:"Please enter transaction name",onChange:i=>o(i.currentTarget.value),onPressEnter:()=>{!n||(r(n),o(""))}}),e(u,{style:{width:"136px"},type:"primary",disabled:!n,onClick:()=>{r(n),o("")},children:"Add transaction"})]})}),e(x,{children:"Transactions that are not on the blockchain"}),e("ul",{children:l.map((i,d)=>a("li",{className:"break",children:[i.id,": ",i.name]},d))}),e(b,{children:e(u,{type:"primary",disabled:!l.length,onClick:()=>c(),children:"Write to the blockchain"})}),e(x,{children:"Transactions already on the blockchain"}),e("ul",{children:m.map((i,d)=>a("li",{className:"break",children:[i.hash,": ",i.transactions.join(", ")]},d))}),a(b,{children:[e(u,{disabled:!m.length,danger:!0,onClick:()=>p(),children:"Tamper"}),e(u,{disabled:!m.length,onClick:()=>g(),children:"Clear all blockchains"})]})]})}function E(t){return String(t).padStart(5,"0")}function ae(){const t=G();return a(b,{direction:"vertical",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a(b,{size:"large",children:[e(N,{title:"Transactions that are not on the chain",value:E(t.transactions.length)}),e(N,{title:"Transactions that have been on the chain",value:E(t.blocks.length)})]}),e(J,{message:`Transaction is ${t.isValid?"normal":"abnormal"}`,type:t.isValid?"success":"error",showIcon:!0})]})}function ce(){return a(re,{children:[e(x,{children:e("h2",{children:"Blockchain"})}),e(ae,{}),e(ie,{}),e(x,{children:"README"}),a(S,{ta:"center",children:["A blockchain is a type of Digital Ledger Technology (DLT) that consists of growing list of records, called blocks, that are securely linked together using cryptography.",e("a",{href:"https://en.wikipedia.org/wiki/Blockchain",target:"_blank",children:"https://en.wikipedia.org/wiki/Blockchain"})]})]})}function oe(){return a("main",{children:[e("h2",{children:"Welcome to the homepage!"}),e(S,{ta:"center",children:e("img",{src:"https://source.unsplash.com/random",className:"App-logo",alt:"logo",style:{maxWidth:"100%"}})})]})}function se(){const t=C(),{pathname:n}=T();return a(M,{children:[e(U,{ghost:!1,title:"Blockchain",subTitle:"Ant Design & React18 & Vite",style:{position:"sticky",top:0},extra:[e(B,{to:"/",children:e(u,{type:n==="/"?"primary":"default",children:"Home"})},"home"),e(B,{to:"/protected",children:e(u,{type:n==="/protected"?"primary":"default",children:"Protected Page"})},"protected"),e(B,{to:"/public",children:e(u,{type:n==="/public"?"primary":"default",children:"Public"})},"public"),e(u,{shape:"circle",href:"https://github.com/capricorncd/blockchain",target:"_blank",children:e(q,{})},"github")],backIcon:e(Y,{}),onBack:()=>t("/")}),a(S,{bg:"#f0f2f5",mh:"100vh",children:[a(S,{p:"24",children:[e(te,{}),e(z,{})]}),a(S,{p:"24 50",ta:"center",children:["\xA92022 Created by"," ",e(u,{type:"link",href:"https://github.com/capricorncd",target:"_blank",style:{padding:0},children:"Capricorncd"}),"."]})]})]})}function le(){var c,l;const t=C(),n=T(),o=O(),s=((l=(c=n.state)==null?void 0:c.from)==null?void 0:l.pathname)||"/";function r(p){p.preventDefault();const g=new FormData(p.currentTarget).get("username");o.signIn(g,()=>{t(s,{replace:!0})})}return a("div",{children:[a("p",{children:["You must log in to view the page at ",s]}),e("form",{onSubmit:r,children:a(v.Group,{compact:!0,style:{width:"300px",maxWidth:"100%"},children:[e(v,{placeholder:"Please enter any string",name:"username",prefix:e(Z,{}),defaultValue:"capricorncd",style:{width:"calc(100% - 80px)"}}),e(u,{type:"primary",htmlType:"submit",style:{width:"80px"},children:"Login"})]})})]})}function he(){const[t,n]=h.exports.useState(0);return a(M,{children:[e("h2",{children:"Protected Page"}),a(u,{onClick:()=>n(o=>o+1),children:["count is: ",t]})]})}function ue(){return e(ee,{children:e($,{children:a(k,{element:e(se,{}),children:[e(k,{path:"/",element:e(ce,{})}),e(k,{path:"/login",element:e(le,{})}),e(k,{path:"/public",element:e(oe,{})}),e(k,{path:"/protected",element:e(ne,{children:e(he,{})})})]})})})}function de(t){const{pathname:n}=T();return h.exports.useEffect(()=>{window.scrollTo(0,0)},[n]),t.children}Q(document.getElementById("root")).render(e(h.exports.StrictMode,{children:e(X,{children:e(de,{children:e(ue,{})})})}));
