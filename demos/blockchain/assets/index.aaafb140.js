import{r as h,j as e,u as B,N as F,a as C,b as a,B as u,g as w,s as O,c as v,D as x,S as b,I as S,d as P,A as G,e as E,P as V,L,G as K,H as j,O as J,U,F as q,R as Y,f as k,h as z,i as $}from"./vendor.31387803.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();const A={isAuthenticated:!1,signIn(t){A.isAuthenticated=!0,setTimeout(t,100)},signOut(t){A.isAuthenticated=!1,setTimeout(t,100)}},M=h.exports.createContext(null);function Q({children:t}){const[n,s]=h.exports.useState(null),c={user:n,signIn:(l,p)=>A.signIn(()=>{s(l),p()}),signOut:l=>A.signOut(()=>{s(null),l()})};return e(M.Provider,{value:c,children:t})}function T(){return h.exports.useContext(M)}function X(){const t=T(),n=C();return t!=null&&t.user?a("p",{children:["Welcome ",t.user,"!"," ",e(u,{onClick:()=>{t.signOut(()=>n("/"))},children:"Sign out"})]}):e("p",{children:"You are not logged in."})}function Z({children:t}){const n=T(),s=B();return n!=null&&n.user?t:e(F,{to:"/login",state:{from:s},replace:!0})}const I="_chains",N="_transactions",R="acb",D={hash:R,transactions:[]},_=h.exports.createContext(null);function ee(t){const[n,s]=h.exports.useState(w(N,[])),[o,r]=h.exports.useState(w(I,[D]));h.exports.useEffect(()=>{O(N,n)},[n]),h.exports.useEffect(()=>{O(I,o)},[o]);function c(i){s([...n,{id:new Date().getTime().toString(16),name:i}])}function l(){const i=o[o.length-1],m={hash:v.exports.SHA256(i.hash+JSON.stringify(n.map(y=>y.id))).toString(),transactions:n.map(y=>y.id)};r([...o,m]),s([])}function p(){const i=[...o],d=i.shift(),m=Array.from({length:Math.ceil(Math.random()*5)}).map(()=>Math.random().toString(16).replace("0.",""));if(!i.length)i.push({hash:v.exports.SHA256(d.hash+JSON.stringify(m)).toString(),transactions:m});else{const y=Math.max(0,Math.floor(Math.random()*i.length));i[y].transactions=m}r([d,...i])}const g=h.exports.useMemo(()=>o.every((i,d)=>d===0?i.hash===R:v.exports.SHA256(o[d-1].hash+JSON.stringify(i.transactions)).toString()===i.hash),[o]);function f(){r([D])}return e(_.Provider,{value:{transactions:n,addTransaction:c,blocks:o.slice(1),writeToBlockchain:l,tamper:p,isValid:g,clearAllBlockchain:f},children:t.children})}function W(){return h.exports.useContext(_)}function te(){const t=h.exports.useRef(null),[n,s]=h.exports.useState(""),o=W();if(!o)return null;const{addTransaction:r,writeToBlockchain:c,transactions:l,tamper:p,blocks:g,clearAllBlockchain:f}=o;return a("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e(x,{children:"Operate"}),a(b,{direction:"vertical",align:"center",style:{maxWidth:"100%",overflow:"hidden"},children:[a(S.Group,{compact:!0,style:{width:"320px",maxWidth:"100%"},children:[e(S,{value:n,ref:t,style:{width:"calc(100% - 136px)"},placeholder:"Please enter transaction name",onChange:i=>s(i.currentTarget.value),onPressEnter:()=>{!n||(r(n),s(""))}}),e(u,{style:{width:"136px"},type:"primary",disabled:!n,onClick:()=>{r(n),s("")},children:"Add transaction"})]}),a(b,{children:[e(u,{type:"primary",disabled:!l.length,onClick:()=>c(),children:"Write to the blockchain"}),e(u,{type:"primary",disabled:!g.length,danger:!0,onClick:()=>p(),children:"Tamper"})]})]}),e(x,{children:"Transactions that are not on the blockchain"}),e("ul",{children:l.map((i,d)=>a("li",{className:"break",children:[i.id,": ",i.name]},d))}),e(x,{children:"Transactions already on the blockchain"}),e("ul",{children:g.map((i,d)=>a("li",{className:"break",children:[i.hash,": ",i.transactions.join(", ")]},d))}),e(b,{children:e(u,{type:"primary",danger:!0,disabled:!g.length,onClick:()=>f(),children:"Clear all blockchains"})})]})}function H(t){return String(t).padStart(5,"0")}function ne(){const t=W();return t?a(b,{direction:"vertical",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a(b,{size:"large",children:[e(P,{title:"Transactions that are not on the chain",value:H(t.transactions.length)}),e(P,{title:"Transactions that have been on the chain",value:H(t.blocks.length)})]}),e(G,{message:`Transaction is ${t.isValid?"normal":"abnormal"}`,type:t.isValid?"success":"error",showIcon:!0})]}):null}function re(){return a(ee,{children:[e(x,{children:e("h2",{children:"Blockchain"})}),e(ne,{}),e(te,{}),e(x,{children:"README"}),a("section",{style:{textAlign:"center"},className:"break",children:["A blockchain is a type of Digital Ledger Technology (DLT) that consists of growing list of records, called blocks, that are securely linked together using cryptography.",e("a",{href:"https://en.wikipedia.org/wiki/Blockchain",target:"_blank",children:"https://en.wikipedia.org/wiki/Blockchain"})]})]})}function ie(){return a("main",{children:[e("h2",{children:"Welcome to the homepage!"}),e("p",{style:{textAlign:"center"},children:e("img",{src:"https://source.unsplash.com/random",className:"App-logo",alt:"logo",style:{maxWidth:"100%"}})})]})}const{Content:ae,Footer:oe}=E;function ce(){const t=C(),{pathname:n}=B();return a(E,{style:{minHeight:"100vh"},children:[e(V,{ghost:!1,title:"Blockchain",subTitle:"Ant Design & React18 & Vite",extra:[e(L,{to:"/protected",children:e(u,{type:n==="/protected"?"primary":"default",children:"Protected Page"})},"protected"),e(L,{to:"/public",children:e(u,{type:n==="/public"?"primary":"default",children:"Public"})},"public"),e(u,{shape:"circle",href:"https://github.com/capricorncd/blockchain",target:"_blank",children:e(K,{})},"github")],backIcon:e(j,{}),onBack:()=>t("/")}),a(ae,{style:{padding:"24px"},children:[e(X,{}),e(J,{})]}),a(oe,{style:{textAlign:"center"},children:["\xA92022 Created by"," ",e(u,{type:"link",href:"https://github.com/capricorncd",target:"_blank",style:{padding:0},children:"Capricorncd"}),"."]})]})}function se(){var c,l;const t=C(),n=B(),s=T(),o=((l=(c=n.state)==null?void 0:c.from)==null?void 0:l.pathname)||"/";function r(p){p.preventDefault();const f=new FormData(p.currentTarget).get("username");s.signIn(f,()=>{t(o,{replace:!0})})}return a("div",{children:[a("p",{children:["You must log in to view the page at ",o]}),e("form",{onSubmit:r,children:a(S.Group,{compact:!0,style:{width:"300px",maxWidth:"100%"},children:[e(S,{placeholder:"Please enter any string",name:"username",prefix:e(U,{}),defaultValue:"capricorncd",style:{width:"calc(100% - 80px)"}}),e(u,{type:"primary",htmlType:"submit",style:{width:"80px"},children:"Login"})]})})]})}function le(){const[t,n]=h.exports.useState(0);return a(q,{children:[e("h2",{children:"Protected Page"}),a(u,{onClick:()=>n(s=>s+1),children:["count is: ",t]})]})}function he(){return e(Q,{children:e(Y,{children:a(k,{element:e(ce,{}),children:[e(k,{path:"/",element:e(re,{})}),e(k,{path:"/login",element:e(se,{})}),e(k,{path:"/public",element:e(ie,{})}),e(k,{path:"/protected",element:e(Z,{children:e(le,{})})})]})})})}z(document.getElementById("root")).render(e(h.exports.StrictMode,{children:e($,{children:e(he,{})})}));
