import{r as h,j as e,u as B,a,B as d,b as T,N as J,c as v,D as k,S,I as b,d as O,A as F,U as V,R as K,e as x,F as j,f as E,P as G,L as w,H as U,O as q,g as Y,h as z}from"./vendor.b70633a6.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const A={isAuthenticated:!1,signIn(t){A.isAuthenticated=!0,setTimeout(t,100)},signOut(t){A.isAuthenticated=!1,setTimeout(t,100)}},M=h.exports.createContext(null);function $({children:t}){const[n,i]=h.exports.useState(null),s={user:n,signIn:(l,p)=>A.signIn(()=>{i(l),p()}),signOut:l=>A.signOut(()=>{i(null),l()})};return e(M.Provider,{value:s,children:t})}function C(){return h.exports.useContext(M)}function Q(){const t=C(),n=B();return console.log(t),t.user?a("p",{children:["Welcome ",t.user,"!"," ",e(d,{onClick:()=>{t.signOut(()=>n("/"))},children:"Sign out"})]}):e("p",{children:"You are not logged in."})}function X({children:t}){const n=C(),i=T();return n.user?t:e(J,{to:"/login",state:{from:i},replace:!0})}function P(t){return String(t).padStart(5,"0")}function I(t,n){console.log(t,n),console.log(JSON.stringify(n,null,2)),localStorage.setItem(t,JSON.stringify(n))}function L(t,n){try{const i=localStorage.getItem(t);return i?JSON.parse(i):n}catch{return n}}const N="_chains",D="_transactions",R="acb",H={hash:R,transactions:[]},W=h.exports.createContext(null);function Z(t){const[n,i]=h.exports.useState(L(D,[])),[c,r]=h.exports.useState(L(N,[H]));h.exports.useEffect(()=>{I(D,n)},[n]),h.exports.useEffect(()=>{I(N,c)},[c]);function s(o){i([...n,{id:new Date().getTime().toString(16),name:o}])}function l(){const o=c[c.length-1],f={hash:v.exports.SHA256(o.hash+JSON.stringify(n.map(y=>y.id))).toString(),transactions:n.map(y=>y.id)};r([...c,f]),i([])}function p(){const o=[...c],u=o.shift(),f=Array.from({length:Math.ceil(Math.random()*5)}).map(()=>Math.random().toString(16).replace("0.",""));if(!o.length)o.push({hash:v.exports.SHA256(u.hash+JSON.stringify(f)).toString(),transactions:f});else{const y=Math.max(0,Math.floor(Math.random()*o.length));o[y].transactions=f}r([u,...o])}const g=h.exports.useMemo(()=>c.every((o,u)=>u===0?o.hash===R:v.exports.SHA256(c[u-1].hash+JSON.stringify(o.transactions)).toString()===o.hash),[c]);function m(){r([H])}return e(W.Provider,{value:{transactions:n,addTransaction:s,blocks:c.slice(1),writeToBlockchain:l,tamper:p,isValid:g,clearAllBlockchain:m},children:t.children})}function _(){return h.exports.useContext(W)}function ee(){const t=h.exports.useRef(null),[n,i]=h.exports.useState(""),c=_();if(!c)return null;const{addTransaction:r,writeToBlockchain:s,transactions:l,tamper:p,blocks:g,clearAllBlockchain:m}=c;return a("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e(k,{children:"Operate"}),a(S,{direction:"vertical",align:"center",style:{maxWidth:"100%",overflow:"hidden"},children:[a(b.Group,{compact:!0,style:{width:"320px",maxWidth:"100%"},children:[e(b,{value:n,ref:t,style:{width:"calc(100% - 136px)"},placeholder:"Please enter transaction name",onChange:o=>i(o.currentTarget.value),onPressEnter:()=>{!n||(r(n),i(""))}}),e(d,{style:{width:"136px"},type:"primary",disabled:!n,onClick:()=>{r(n),i("")},children:"Add transaction"})]}),a(S,{children:[e(d,{type:"primary",disabled:!l.length,onClick:()=>s(),children:"Write to the blockchain"}),e(d,{type:"primary",disabled:!g.length,danger:!0,onClick:()=>p(),children:"Tamper"})]})]}),e(k,{children:"Transactions that are not on the blockchain"}),e("ul",{children:l.map((o,u)=>a("li",{children:[o.id,": ",o.name]},u))}),e(k,{children:"Transactions already on the blockchain"}),e("ul",{children:g.map((o,u)=>a("li",{children:[o.hash,": ",o.transactions.join(", ")]},u))}),e(S,{children:e(d,{type:"primary",danger:!0,disabled:!g.length,onClick:()=>m(),children:"Clear all blockchain"})})]})}function te(){const t=_();return t?a(S,{direction:"vertical",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a(S,{size:"large",children:[e(O,{title:"Transactions that are not on the chain",value:P(t.transactions.length)}),e(O,{title:"Transactions that have been on the chain",value:P(t.blocks.length)})]}),e(F,{message:`Transaction is ${t.isValid?"normal":"abnormal"}`,type:t.isValid?"success":"error",showIcon:!0})]}):null}function ne(){return a(Z,{children:[e(k,{children:e("h2",{children:"Blockchain"})}),e(te,{}),e(ee,{}),e(k,{children:"README"}),a("section",{style:{textAlign:"center"},children:["A blockchain is a type of Digital Ledger Technology (DLT) that consists of growing list of records, called blocks, that are securely linked together using cryptography.",e("a",{href:"https://en.wikipedia.org/wiki/Blockchain",target:"_blank",children:"https://en.wikipedia.org/wiki/Blockchain"})]})]})}function re(){var s,l;const t=B(),n=T(),i=C(),c=((l=(s=n.state)==null?void 0:s.from)==null?void 0:l.pathname)||"/";function r(p){p.preventDefault();const m=new FormData(p.currentTarget).get("username");i.signIn(m,()=>{t(c,{replace:!0})})}return a("div",{children:[a("p",{children:["You must log in to view the page at ",c]}),e("form",{onSubmit:r,children:a(b.Group,{compact:!0,style:{width:"300px",maxWidth:"100%"},children:[e(b,{placeholder:"Please enter any string",name:"username",prefix:e(V,{}),defaultValue:"capricorncd",style:{width:"calc(100% - 80px)"}}),e(d,{type:"primary",htmlType:"submit",style:{width:"80px"},children:"Login"})]})})]})}const{Content:oe,Footer:ie}=E;function ae(){return e($,{children:e(K,{children:a(x,{element:e(se,{}),children:[e(x,{path:"/",element:e(le,{})}),e(x,{path:"/login",element:e(re,{})}),e(x,{path:"/Blockchain",element:e(ne,{})}),e(x,{path:"/protected",element:e(X,{children:e(ce,{})})})]})})})}function ce(){const[t,n]=h.exports.useState(0);return a(j,{children:[e("h2",{children:"Protected Page"}),a(d,{onClick:()=>n(i=>i+1),children:["count is: ",t]})]})}function se(){const t=B(),n=T();return console.log(n),a(E,{style:{minHeight:"100vh"},children:[e(G,{ghost:!1,title:"React18 Hooks Typescript Vite",subTitle:"Ant Design",extra:[e(w,{to:"/protected",children:e(d,{children:"Protected Page"})},"protected"),e(w,{to:"/blockchain",children:e(d,{type:"primary",children:"Blockchain"})},"blockchain")],backIcon:e(U,{}),onBack:()=>t("/")}),a(oe,{style:{padding:"24px"},children:[e(Q,{}),e(q,{})]}),a(ie,{style:{textAlign:"center"},children:["\xA92022 Created by"," ",e(d,{type:"link",href:"https://github.com/capricorncd",target:"_blank",style:{padding:0},children:"Capricorncd"}),"."]})]})}function le(){return a("main",{children:[e("h2",{children:"Welcome to the homepage!"}),e("p",{style:{textAlign:"center"},children:e("img",{src:"https://source.unsplash.com/random",className:"App-logo",alt:"logo",style:{maxWidth:"100%"}})})]})}Y(document.getElementById("root")).render(e(h.exports.StrictMode,{children:e(z,{children:e(ae,{})})}));
