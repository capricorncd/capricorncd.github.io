import{r as $,h as v,d as _,o as T,c as p,w as c,a as n,u,b as i,t as m,n as E,M as S,_ as C,e as f,f as B,g}from"./index-C6WBLoIy.js";function b(l,e,o){const t=$(!1);return{open(){t.value=!0},close(){t.value=!1},get component(){return v(l,{...o,visible:t.value,controller:e})}}}function M(){const l={};let e=null,o=null,t=null;return{add(s,d){if(l[s])throw new Error(`A ${String(s)} named controller handler already exists.`);return l[s]=d,this},beforeEach(s){return o=s,this},afterEach(s){return t=s,this},exec(s,...d){o==null||o(...d),l[s](...d),t==null||t(...d)},onEnd(s){return e=s,this},end(...s){o==null||o(...s),e==null||e(...s),t==null||t(...s)}}}function y(){const l=M(),e=new Map;return{get modals(){return{add(o,t){const s=b(o,l,t);if(e.has(o))throw new Error(`Modal ${o} already exists`);return e.set(o,s),this},open(o){var t;(t=e.get(o))==null||t.open()},close(o){var t;(t=e.get(o))==null||t.close()},closeAll(){e.forEach(o=>o.close())}}},get component(){return{render(){const o=[];return e.forEach(t=>{o.push(t.component)}),o}}},get controller(){return l},destroy(){e.clear()}}}const r={OPEN_TEST_A:1,OPEN_TEST_B:2,OPEN_TEST_C:3,OPEN_TEST_D:4},N=_({__name:"TestA",props:{visible:{type:Boolean},msg:{},controller:{}},setup(l){const e=l;return(o,t)=>(T(),p(S,{title:"Test Modal A",class:E(o.$style.root),"model-value":e.visible},{footer:c(()=>[n("button",{onClick:t[0]||(t[0]=s=>o.controller.exec(u(r).OPEN_TEST_B,"Show B"))},"Show B"),n("button",{onClick:t[1]||(t[1]=s=>o.controller.exec(u(r).OPEN_TEST_D,"Show D"))},"Show D"),n("button",{onClick:t[2]||(t[2]=s=>o.controller.end())},"Close")]),default:c(()=>[i(" Some text for this modal. "+m(o.msg)+" ",1)]),_:1},8,["class","model-value"]))}}),k="_root_2m4e9_1",A={root:k},O={$style:A},w=C(N,[["__cssModules",O]]),P=_({__name:"TestB",props:{visible:{type:Boolean},msg:{},controller:{}},setup(l){return(e,o)=>(T(),p(S,{title:"Test Modal B",class:E(e.$style.root),"model-value":e.visible},{footer:c(()=>[n("button",{onClick:o[0]||(o[0]=t=>e.controller.exec(u(r).OPEN_TEST_A,"Show A"))},"Back"),n("button",{onClick:o[1]||(o[1]=t=>e.controller.exec(u(r).OPEN_TEST_C,"Open TestC"))},"Open TestC"),n("button",{onClick:o[2]||(o[2]=t=>e.controller.end("Close B"))},"Close")]),default:c(()=>[i(" Some text for this modal. "+m(e.msg)+" ",1)]),_:1},8,["class","model-value"]))}}),D="_root_8oipq_1",h={root:D},V={$style:h},q=C(P,[["__cssModules",V]]),x=_({__name:"TestC",props:{visible:{type:Boolean},msg:{},controller:{}},setup(l){return(e,o)=>(T(),p(S,{title:"Test Modal C",class:E(e.$style.root),"model-value":e.visible},{footer:c(()=>[n("button",{onClick:o[0]||(o[0]=t=>e.controller.exec(u(r).OPEN_TEST_B,"Show B"))},"Back"),n("button",{onClick:o[1]||(o[1]=t=>e.controller.end("Close C"))},"Close")]),default:c(()=>[i(" Some text for this modal. "+m(e.msg)+" ",1)]),_:1},8,["class","model-value"]))}}),U="_root_1gacs_1",z={root:U},G={$style:z},j=C(x,[["__cssModules",G]]),F=_({__name:"TestD",props:{visible:{type:Boolean},msg:{},controller:{}},setup(l){return(e,o)=>(T(),p(S,{title:"Test Modal D",class:E(e.$style.root),"model-value":e.visible},{footer:c(()=>[n("button",{onClick:o[0]||(o[0]=t=>e.controller.exec(u(r).OPEN_TEST_A,"Show A"))},"Back"),n("button",{onClick:o[1]||(o[1]=t=>e.controller.end("Close D"))},"Close")]),default:c(()=>[i(" Some text for this modal. "+m(e.msg)+" ",1)]),_:1},8,["class","model-value"]))}}),I="_root_1qpya_1",J={root:I},K={$style:J},L=C(F,[["__cssModules",K]]),a={TEST_A:w,TEST_B:q,TEST_C:j,TEST_D:L};function Q(){const{modals:l,controller:e,component:o,destroy:t}=y();return l.add(a.TEST_A,{msg:"Message Props"}).add(a.TEST_B).add(a.TEST_C).add(a.TEST_D),e.beforeEach((...s)=>{console.log("beforeEach",s),l.closeAll()}).onEnd((...s)=>{console.log("onEnd",s)}).add(r.OPEN_TEST_A,(...s)=>{console.log(s),l.open(a.TEST_A)}).add(r.OPEN_TEST_B,(...s)=>{console.log(s),l.open(a.TEST_B)}).add(r.OPEN_TEST_D,(...s)=>{console.log(s),l.open(a.TEST_D)}).add(r.OPEN_TEST_C,(...s)=>{console.log(s),l.open(a.TEST_C)}),f(()=>{console.log("onUnmounted"),t()}),{controller:e,component:o}}const R=n("h1",null,[i(" This is an "),n("i",null,[n("b",null,"useModalsController")]),i(" page ")],-1),X={__name:"ControllerView",setup(l){const{controller:e,component:o}=Q();return(t,s)=>(T(),B("main",null,[R,n("button",{onClick:s[0]||(s[0]=d=>u(e).exec(u(r).OPEN_TEST_A))},"Show Modal TestA"),g(u(o))]))}};export{X as default};
